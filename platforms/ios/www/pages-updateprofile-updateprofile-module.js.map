{"version":3,"sources":["webpack:///./src/app/pages/updateprofile/updateprofile.module.ts","webpack:///./src/app/pages/updateprofile/updateprofile.page.html","webpack:///./src/app/pages/updateprofile/updateprofile.page.scss","webpack:///./src/app/pages/updateprofile/updateprofile.page.ts"],"names":[],"mappings":"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","file":"pages-updateprofile-updateprofile-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UpdateprofilePage } from './updateprofile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UpdateprofilePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [UpdateprofilePage]\n})\nexport class UpdateprofilePageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>\\n      Ver Mi Perfil\\n    </ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home\\\"></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-row margin-top justify-content-center>\\n    <ion-avatar class=\\\"avatar\\\">\\n      <img [src]=\\\"foto\\\" class=\\\"back\\\">\\n      <ion-icon (click)=\\\"Show_Action_Sheet()\\\" class=\\\"circle-button front\\\" name=\\\"add-circle\\\"></ion-icon>\\n    </ion-avatar>\\n  </ion-row>\\n  <ion-row justify-content-center margin-bottom>\\n    <h6>\\n      Nombre del Repartidor\\n    </h6>\\n  </ion-row>\\n  <div text-center margin-top>\\n    <ion-row class=\\\"input-container-up\\\">\\n      <ion-input class=\\\"input-login\\\" placeholder=\\\"Nombre del Repartidor\\\"\\n        (ionInput)=\\\"validate_inputs($event.target,'text')\\\" [(ngModel)]=\\\"userData.nombre\\\"></ion-input>\\n    </ion-row>\\n    <ion-row class=\\\"input-container-down\\\">\\n      <ion-input class=\\\"input-login\\\" placeholder=\\\"Apellido Paterno del Repartidor\\\"\\n        (ionInput)=\\\"validate_inputs($event.target,'text')\\\" [(ngModel)]=\\\"userData.apellidoPaterno\\\"></ion-input>\\n    </ion-row>\\n    <ion-row class=\\\"input-container-down\\\">\\n      <ion-input class=\\\"input-login\\\" placeholder=\\\"Apellido Materno del Repartidor\\\"\\n        (ionInput)=\\\"validate_inputs($event.target,'text')\\\" [(ngModel)]=\\\"userData.apellidoMaterno\\\"></ion-input>\\n    </ion-row>\\n    <ion-row class=\\\"input-container-down\\\">\\n      <ion-input placeholder=\\\"Contraseña Actual\\\" class=\\\"input-login\\\" type=\\\"password\\\"\\n        (ionInput)=\\\"validate_inputs($event.target,'password')\\\" [(ngModel)]=\\\"userData.contrasena\\\"></ion-input>\\n    </ion-row>\\n    <ion-row class=\\\"input-container-down\\\">\\n      <ion-input placeholder=\\\"Confirmar Contraseña Actual\\\" class=\\\"input-login\\\" type=\\\"password\\\"\\n        (ionInput)=\\\"validate_inputs($event.target,'password')\\\" [(ngModel)]=\\\"confirmPassword\\\"></ion-input>\\n    </ion-row>\\n    <ion-row justify-content-center>\\n      <a (click)=\\\"Update_Account()\\\" class=\\\"login-text\\\" router-direction=\\\"forward\\\">Guardar Cambios</a>\\n    </ion-row>\\n    <ion-row justify-content-center>\\n      <a (click)=\\\"Cancel()\\\" class=\\\"password-text\\\" router-direction=\\\"back\\\">Cancelar</a>\\n    </ion-row>\\n  </div>\\n</ion-content>\"","module.exports = \".avatar {\\n  width: 23vh;\\n  height: 23vh; }\\n\\n.input-login {\\n  border: 1px solid #ccc;\\n  border-radius: 6px;\\n  font-size: 12px;\\n  height: 5vh; }\\n\\n.input-container-up {\\n  width: 65%;\\n  margin: auto; }\\n\\n.input-container-down {\\n  width: 65%;\\n  margin: 5% auto 5% auto; }\\n\\n.login-text {\\n  color: #3880ff;\\n  margin-top: 10px;\\n  font-size: 18px; }\\n\\n.password-text {\\n  color: #f04141;\\n  margin-top: 20px;\\n  font-size: 18px; }\\n\\n.circle-button {\\n  margin-top: -6vh;\\n  margin-right: -1vh;\\n  color: #f04141;\\n  width: 7vh;\\n  height: 7vh;\\n  float: right; }\\n\\n.back {\\n  z-index: 0;\\n  position: relative; }\\n\\n.front {\\n  z-index: 1;\\n  position: relative; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sZXhzb2Z0d2FyZS9EZXNrdG9wL0VzdG9yL3JlcGFydGlkb3IvcmVwYXJ0aWRvckVzdG9yL3NyYy9hcHAvcGFnZXMvdXBkYXRlcHJvZmlsZS91cGRhdGVwcm9maWxlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBR2hCO0VBQ0ksc0JBQXFCO0VBQ3JCLGtCQUFrQjtFQUNsQixlQUFjO0VBQ2QsV0FBVyxFQUFBOztBQUdmO0VBQ0ksVUFBVTtFQUNWLFlBQVcsRUFBQTs7QUFHZjtFQUNJLFVBQVU7RUFDVix1QkFBdUIsRUFBQTs7QUFHM0I7RUFDSSxjQUFhO0VBQ2IsZ0JBQWU7RUFDZixlQUFlLEVBQUE7O0FBR25CO0VBQ0ksY0FBYTtFQUNiLGdCQUFlO0VBQ2YsZUFBZSxFQUFBOztBQUduQjtFQUNJLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsY0FBYztFQUNkLFVBQVU7RUFDVixXQUFXO0VBQ1gsWUFBWSxFQUFBOztBQUdoQjtFQUNJLFVBQVU7RUFDVixrQkFBa0IsRUFBQTs7QUFHdEI7RUFDSSxVQUFVO0VBQ1Ysa0JBQWtCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy91cGRhdGVwcm9maWxlL3VwZGF0ZXByb2ZpbGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmF2YXRhcntcbiAgICB3aWR0aDogMjN2aDtcbiAgICBoZWlnaHQ6IDIzdmg7XG59XG5cbi5pbnB1dC1sb2dpbntcbiAgICBib3JkZXI6MXB4IHNvbGlkICNjY2M7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGZvbnQtc2l6ZToxMnB4O1xuICAgIGhlaWdodDogNXZoO1xufVxuXG4uaW5wdXQtY29udGFpbmVyLXVwe1xuICAgIHdpZHRoOiA2NSU7XG4gICAgbWFyZ2luOmF1dG87XG59XG5cbi5pbnB1dC1jb250YWluZXItZG93bntcbiAgICB3aWR0aDogNjUlO1xuICAgIG1hcmdpbjogNSUgYXV0byA1JSBhdXRvO1xufVxuXG4ubG9naW4tdGV4dHtcbiAgICBjb2xvcjojMzg4MGZmO1xuICAgIG1hcmdpbi10b3A6MTBweDtcbiAgICBmb250LXNpemU6IDE4cHg7XG59XG5cbi5wYXNzd29yZC10ZXh0e1xuICAgIGNvbG9yOiNmMDQxNDE7XG4gICAgbWFyZ2luLXRvcDoyMHB4O1xuICAgIGZvbnQtc2l6ZTogMThweDtcbn1cblxuLmNpcmNsZS1idXR0b257XG4gICAgbWFyZ2luLXRvcDogLTZ2aDtcbiAgICBtYXJnaW4tcmlnaHQ6IC0xdmg7XG4gICAgY29sb3I6ICNmMDQxNDE7XG4gICAgd2lkdGg6IDd2aDtcbiAgICBoZWlnaHQ6IDd2aDtcbiAgICBmbG9hdDogcmlnaHQ7XG59XG5cbi5iYWNre1xuICAgIHotaW5kZXg6IDA7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uZnJvbnR7XG4gICAgei1pbmRleDogMTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG4iXX0= */\"","import { Component } from '@angular/core';\nimport { NavController, ActionSheetController, MenuController, Events } from '@ionic/angular';\nimport { UserService } from 'src/app/services/user/user.service';\nimport { Storage } from '@ionic/storage';\nimport { FuncionesGlobalesService } from 'src/app/services/global/funciones-globales.service';\nimport { user } from 'src/interfaces/user.interface';\nimport { async } from '@angular/core/testing';\nimport { ControlContainer } from '@angular/forms';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-updateprofile',\n  templateUrl: './updateprofile.page.html',\n  styleUrls: ['./updateprofile.page.scss'],\n})\nexport class UpdateprofilePage {\n\n  confirmPassword: string = \"\";\n  userData: user = new user();\n  foto: any;\n\n  constructor(private NavCtrl: NavController,\n    private ASController: ActionSheetController,\n    private globalFunctions: FuncionesGlobalesService,\n    private menu: MenuController,\n    private userService: UserService,\n    private storage: Storage,\n    private _sanitizer: DomSanitizer,\n    public events: Events) {\n    this.storage.get('user_Data').then((val) => {\n      this.userData = val;\n      this.foto = this._sanitizer.bypassSecurityTrustUrl(\"data:Image/*;base64,\"+this.userData.fotografia);\n    });\n  }\n\n  //cuando hace click en aceptar se actualizan datos y se mandan a menú lateral para que actualicé cambios, remueve los anteriores\n  //del storage y pone los nuevos\n  Update_Account() {\n    if (this.userData.contrasena == this.confirmPassword) {\n      this.userService.checkUserPassword(this.userData).subscribe((response: any) => {\n        if (response.status == \"success\") {\n          this.userData.foto = this.foto.substring(this.foto.indexOf(\",\") + 1, this.foto.length - 1);\n          this.userService.updateUserData(this.userData).subscribe((resp: any) => {\n            if (response.status == \"success\") {\n              this.userData.clear();\n              this.confirmPassword = \"\";\n              this.globalFunctions.Show_Ok_Alert('Exito', 'Sus datos fueron guardados con exito.');\n              this.events.publish('emitUserData', resp.user[0]);\n              this.storage.remove('user_Data').then(() => {\n                this.storage.set('user_Data', resp.user[0]);\n                this.Cancel();\n              });\n            }\n            else\n              this.globalFunctions.Show_Ok_Alert('Error inesperado', 'Sus datos no pudieron ser modificados. Por favor intentelo nuevamente.' + response.message);\n          });\n        }\n        else\n          this.globalFunctions.Show_Ok_Alert('Error', 'Sus datos no pudieron ser modificados. Por favor intentelo nuevamente.');\n      });\n    }\n    else\n      this.globalFunctions.Show_Ok_Alert('Error', 'Sus contraseñas no coinciden. Por favor intentelo nuevamente.');\n  }\n\n  //regresa al menú lateral cuando se hace click en cancelar\n  Cancel() {\n    this.menu.enable(true, 'menu');\n    this.menu.open('menu');\n    this.NavCtrl.navigateBack('home');\n  }\n\n  //checa que la cadena cumpla con la expresion regular , sino, borra el ultimo digito ingresado \n  validate_inputs(target, option) {\n    target.value = this.globalFunctions.validate_fields(target.value, option);\n  }\n\n  //muestra action sheet para que seleccione camara o galeria y devuelve la imagen en base 64\n  async Show_Action_Sheet() {\n    const actionSheet = await this.ASController.create({\n      header: 'Foto del perfil',\n      buttons: [{\n        text: 'Seleccionar foto',\n        icon: 'image',\n        handler: () => {\n          this.globalFunctions.Upload_Picture().then((value) => {\n            this.foto = value;\n          });\n        }\n      }, {\n        text: 'Usar camara',\n        icon: 'camera',\n        handler: () => {\n          this.globalFunctions.Use_Camera().then((value) => {\n            this.foto = value;\n          });\n        }\n      }, {\n        text: 'Cancel',\n        icon: 'close',\n        role: 'cancel'\n      }]\n    });\n    await actionSheet.present();\n  }\n\n}\n"],"sourceRoot":""}